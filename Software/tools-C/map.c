#include <stdio.h>#asm        info    loadmap absolute binary files        info    by w lekkerkerker        info    v 2.0 september 1988#endasmFILE    *ifp, *fopen();unsigned modcnt;unsigned modptr;main(argc, argv)int     argc;char    *argv[];{        int     c0, c1;        long    ftell();        pflinit();        fflush(stdout);        if (argc != 2)                error("Usage: map binfile");        if ((ifp=fopen(argv[1],"r")) == NULL)                error("map: can't open file");        if (inchar()!=0x02 || inchar()!=0x12)                error("map: bad file");        fseek(ifp, 24L, 0);        do {                modcnt=256*inchar()+inchar();                modptr=256*inchar()+inchar();                if (modcnt != 0 || modptr != 0) {                        printf("%04x-%04x\n", modptr, modptr+modcnt-1);                        if (fseek(ifp, (long)modcnt, 1) == -1) {                                perror("map: ");                                exit(errno);                        }                }        } while (modcnt != 0 || modptr != 0);        if (fseek(ifp, 0xaL, 0) == -1) {                perror("map: ");                exit(errno);        }        modcnt=256*inchar()+inchar();        if (modcnt != 0)                printf("%04x\n", modcnt);         fclose(ifp);}        /* input character from input file */inchar(){        int     c;        if ((c=getc(ifp)) == EOF) {                if (errno)                        perror("map: ");                exit(errno);        }        return(c);}/* report error routine */error(sptr)char    *sptr;{        if (errno == 0)                puts(sptr);        else                perror(sptr);        exit(1);}