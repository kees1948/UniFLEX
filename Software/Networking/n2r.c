#include <stdio.h>#include <net.h>#include <signal.h>#include <pwd.h>char buffer[512];char myremip[16];char myrempr[6];char linebuf[128];char homedir[128];void wabort();struct passwd *pwd;struct passwd *getpwuid();int main(argc, argv)int argc;char **argv;{    int sfdn, i=0, count =0;    struct sockaddr_in server;    FILE *netinfo = NULL;    signal (SIGPIPE, wabort);    pwd = getpwuid(getuid());    strncpy(homedir, pwd->pw_dir,112);    strcat(homedir, "/.mynet");    if ((netinfo = fopen(homedir, "r")) == NULL)    {        fprintf(stderr,"n2r: can't find settings! ~/.mynet  \n");        exit(1);    }    while (fgets(linebuf, 127, netinfo) != NULL)    {        if(index(linebuf, '*') != NULL)            continue;        if(sscanf(linebuf, "%s %s", myremip, myrempr) != 2)            continue;        else            goto FOUND;    }    fclose(netinfo);    exit(2);FOUND:    sfdn = socket(AF_INET, SOCK_STREAM,0);    bzero(&server, sizeof(struct server));    server.sin_family = AF_INET;    server.sin_port = atoi(myrempr);    server.sin_addr = (uint32_t) inet_addr(myremip) ;    i = connect(sfdn,(struct sockaddrin*) &server, sizeof(server));    if (i == -1)    {        printf ("Remote Server not found!\n");        exit(1);    }    while(1)        {                if((count = read (sfdn, buffer, 512)) == 0)                {                        close (sfdn);  /* eof */                        exit(0);                }                write (1, buffer, count);         }}void wabort(){        exit(3);}