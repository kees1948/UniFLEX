        opt nol        lib sysdef        lib sysints        lib syserrors        lib sysnet        opt lis,exp** the hard coded netwrok settings near the end* of this file should be modified to match* your own network settings*start   equ *        ldd    0,s        cmpd    #2        bne     80f        ldx    4,s        stx    opfile        sys    ind,filopn        lbes    err1        std    wfdn*80      sys     ssock,AF_INET,SOCK_STREAM,0        bec     01f        cmpd    #EINTR        lbne     err101        std     sfdn        bec     01f        cmpd    #EINTR        bne     err101        ldd     #socklen        pshs    d        ldd     #sockad        pshs    d        ldd     sfdn        pshs    d        lda     #sconn        pshs    a        tfr     s,x        sys     indx        leas    7,s        bec     01f        cmpd    #EINTR        bne     err101        nop        bec     01f        cmpd    #EINTR        bne     err10111        ldd     sfdn        sys     read,buffer,32768        bes     err1        nop        cmpd    #0        beq     12f        std     rcnt        pshs    d        ldd     #buffer        pshs    d        lda     #write        pshs    a        leax    0,s        ldd    wfdn        sys    indx        leas    5,s        bra     11b12      ldd     sfdn        sys     close        sys     termerr1    std     retval        ldd     sfdn        sys     close        ldd     #2        sys     write,errmsg,errlen        nop        sys    termm1      fcc    "open ",$d,0m1l     equ    *-m1m2      fcc    "conn ",$d,0m2l     equ    *-m2m3      fcc    "read ",$d,0m3l     equ    *-m3filopn  fcb    createopfile  fdb    0        fdb    3dowrite fcb    write        fdb    bufferrcnt    rzb 2** note that the IP address is DEFINED with COMMA's*sockad        fdb     AF_INET        fdb     32100              TCP PORT USED        fcb     192,168,1,155      IP OF MY PC (SERVERsocklen equ     *-sockadretval  rzb     2errmsg  fcc     "socket error",$derrlen  equ     *-errmsgsfdn    rzb     2wfdn    fdb     1        org     (*+511)&512buffer  rmb     512        end     start