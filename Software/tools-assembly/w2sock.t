        opt nol        lib sysdef        lib sysints        lib syserrors        lib sysnet        opt lis,exp** the hard coded network settings near the end* of this file should be modified to match* your own network settings*start   equ *        ldd     0,s        cmpd    #2        beq     80f        ldd     #0        std     retval        std     ffdn        std input        bra     81f80      ldx     4,s        stx     opfile        sys     ind,filopn        lbes    err1        std     ffdn*81      sys     ssock,AF_INET,SOCK_STREAM,PF_INET        bec     01f        cmpd    #EINTR        lbne     err101        std     sfdn        bec     01f        cmpd    #EINTR        lbne     err101        ldd     #socklen        pshs    d        ldd     #sockad        pshs    d        ldd     sfdn        pshs    d        lda     #sconn        pshs    a        tfr     s,x        sys     indx        leas    7,s*        bec     01f        cmpd    #EINTR        bne     err1        std     constat***************************************************01        nop*        bec     01f        cmpd    #EINTR        bne     err1*01      ldd    ffdn        sys    read,buffer,512        bes    err1        cmpd   #0        beq    12f        nop*        std    rcnt        beq    12f****************************************************        pshs    d        ldd    #buffer        pshs    d        lda    #write        pshs    a        leax    0,s        ldd    sfdn        sys    indx        leas    5,s*        bra 01b****************************************************12      ldd     sfdn        sys     close        ldd    ffdn        sys     close        ldd #0        sys termerr1    std retval        ldd     sfdn        sys close        ldd     #2        sys     write,errmsg,errlen        nop        sys     termfilopn  fcb    openopfile  fdb    0        fdb    0    read onlydowrite fcb    write        fdb    bufferrcnt    rzb    2** note that the IP address id DEFINED ith COMMA's*sockad  fdb     AF_INET        fdb     32100                   TCP PORT USED        fcb     192,168,1,155           IP OF MY PC (SERVER)socklen equ    *-sockadretval  rzb     2constat rzb     2errmsg  fcc     "socket error",$derrlen  equ    *-errmsgsfdn    rzb     2ffdn    rzb     2        org     (*+511)&512buffer  rmb    512        end     start