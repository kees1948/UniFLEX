 sttl Debug Interface Routines pagDB_main        bsr     DB_test         see if debug routines present        jmp     [DEBUGROM+2]DB_pdata        bsr     DB_test         see if debug routines present        jmp     [DEBUGROM+4]DB_phex        bsr     DB_test         see if debug routines present        jmp     [DEBUGROM+6]DB_phex2        bsr     DB_test         see if debug routines present        jmp     [DEBUGROM+8]DB_pcrlf        bsr     DB_test         see if debug routines present        jmp     [DEBUGROM+10]DB_check        bsr     DB_test         see if debug routines present        jmp     [DEBUGROM+12]DB_config        bsr     DB_test         see if debug routines present        jmp     [DEBUGROM+14]DB_msg  pshs    cc,d,x        ldx     1+2+2,s         get return address        ldd     ,x++            get mask word        anda    DB_cntrl        andb    DB_cntrl+1        pshs    b        ora     ,s+        beq     10f             jump if flag not set        leax    2,x             skip over false address & fall through        bra     20f10      ldx     ,x              get false branch label20      stx     1+2+2,s         fix up return address        puls    cc,d,x,pc       return*DB_pspaceDB_outsp        pshs    d,x        ldx     #00f        bsr     DB_pdata        puls    d,x,pc00      fcc     ' ',0DB_test pshs    cc,d        ldd     DEBUGROM        Debug rom present?        cmpd    #$1234          special marker        beq     99f             yes - exit        puls    cc,d            no - abort DB_xx function        leas    2,s        rts99      puls    cc,d,pc         return