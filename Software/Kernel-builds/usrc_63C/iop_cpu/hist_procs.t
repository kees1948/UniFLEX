          if      DO_HISTORY          sttl    History    Entry Procedures          pag** H_cpu - Place a transaction from the CPU into*         the history Queue.*H_cpu     pshs    d,x          ldx     hstptr     get history queue pointer          lda     cpu_fio          sta     hst_cmd,x          lda     cpu_fio1          sta     hst_seq,x          lda     cpu_fio3          sta     hst_tty,x          lda     cpu_fio2          sta     hst_val,x          leax    HRECSIZ,x          cmpx    #hstptr    end of Queue?          blo     10f          ldx     #hstbuf10        stx     hstptr          puls    d,x,pc** H_fio - Place a transaction from the IOP into*         the history Queue.*H_fio     pshs    d,x          ldx     hstptr     get history queue pointer          lda     fio_cpu          sta     hst_cmd,x          lda     fio_cpu1          sta     hst_seq,x          lda     fio_cpu3          sta     hst_tty,x          lda     fio_cpu2          sta     hst_val,x          leax    HRECSIZ,x          cmpx    #hstptr    end of Queue?          blo     10f          ldx     #hstbuf10        stx     hstptr          puls    d,x,pc          endif