          lib     environment.h          sttl    Null       Device Driver          pag          name    nulldrvr          global  nodev,nuldev,nuldrd,nuldwr,zerdrv,rnddrv,dorand** Null and no device calls*nodev     lda     #EBDEV     set error          sta     uerrornuldev    rts     return** null read driver** B holds device minor*nuldrd  cmpb    #0      /dev/null        bne     zerdrv* /dev/null          ldd     #0         set eof status          std     urglst+UD          rts     return* /dev/zerozerdrv  cmpb    #1      /dev/zero        bne     rnddrv  wrong devicezerd01        ldx     uipos2  low addresszerd03  clrb       *** very inefficient for now        lbsr    passc        bmi     zerdex  end of list        cmpx    #0      overflow        bne     zerd03        ldd     uipos        incd        std     uipos        inc     uipos+1  set overflow        nopzerdex  rts** null write driver** B holds device minor*nuldwr  cmpb    #0      /dev/null        bne  nodev  wrong selection          ldd     usarg1   * bug in original!  #0         -- set all written          std     uicnt      return as write count          rts     return** random*rnddrv  cmpb    #2        bne     nodev           wrong        bsr     dorand        ldb     rndval        lbsr    passc        bmi     rnddex        ldb     rndval+1        lbsr    passcrnddex  rts** VAL ^= VAL << 7* VAL ^= VAL >> 9* VAL ^= VAL << 8*dorand        ldx     rndval        tfr     x,d        lsld                    << 7        lsld        lsld        lsld        lsld        lsld        lsld        eorr    D,X             D,X        tfr     x,d        lsrd                    >> 9        lsrd        lsrd        lsrd        lsrd        lsrd        lsrd        lsrd        lsrd        eorr    D,X        tfr     x,d        tfr     b,a        clrb        eorr    D,X        stx     rndval        rts