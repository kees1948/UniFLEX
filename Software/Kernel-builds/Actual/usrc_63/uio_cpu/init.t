          sttl    Table      Initialization          pag** stbinit - Initialize System Memory Tables*stbinit   lbsr    set_tables go figure out configuration, tables, etc* Initialize Terminal Interrupt Queue15        ldx     #SI_Q      set queue empty          stx     SI_Q_ptr          ldx     #int_buf   reset message in pointer          stx     int_ptr* further table setup          rts** Set up system tables*set_tables* Compute configuration*          lda     max_trn             reserve for system tasks          adda    #4          sta     NUM_TSK** -- Task table          lda     #TSKSIZ          ldb     NUM_TSK          mul          stu     tsktab          lbsr    sto_chk    check for system table space overflow          bcs     40f        jump if it happens          stu     tskend*          bra     60f* -- System table space has overflowed!* -- Try adjusting some parameters to get it under control40          ldx     fifo_us0      pointer          jmp     rom_init   ... what else can I do???50        lbra    30b        go try it all again*-- Initialize devices60* -- All done90        rts*** Allocate some system table space*   D - Space being consumed*   U - Current end of table space*   jsr sto_chk (System Table Overflow check)*   <CS> if overflow*sto_chk   leau    d,u        compute new end pointer          cmpu    #end_vars  overflow?          bhi     10f        yes - return error          clc     no         - return OK          rts10        sec     ..         bad owies          rts** tskinit - Initialize all tasks*tskinit   ldx     #tsktab          stx     utask          ldb     NUM_TSK  # tasks in system          pshs    b          ldy     tsktab     task 1          leay    TSKSIZ,y1011        lda     #TFREE     mark all tasks free          cmpx    tsktab     is this the system task?          bne     15f          lda     #TSYS       the system task is never free15        sta     tsstat,x          lda     #$FF       not associated with a terminal          sta     tsdev,x          sta     tsdev+1,x          leau    TSKSIZ,x   initialize stack          ldd     #IO_han          pshs    y          cmpx    ,s++       task 1?          bne     20f        no - normal I/O handling task          ldd     #SI_HAN    yes - special signal interrupt handling task20        pshu    d          stu     usp,x          stu     umark0,x          leax    TSKSIZ,x          dec     0,s        done?          bne     10b          leas    1,s        clean up stack          ldd     #0         nothing running or sleeping          std     runlst          std     slplst          std     slplst+tsslnk          leax    0,y        start interrupt handling task          jsr     makrdy          rts