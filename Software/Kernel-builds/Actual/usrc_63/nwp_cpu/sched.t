          sttl    Scheduler  routines          pag** All routines in this file pertain to scheduling* operations.*** rsched** Rsched will reschedule the cpu giving control to* another ready task.  If no tasks are ready,* looping is done until one becomes ready.  Rsched* does not put the current task back on the ready list!* This routine returns one to the caller.  All registers* are destroyed.*rsched    seti    mask       interrupts*rsched2   clri          nop          seti          bsr     stptsk          bsr     gtsktb*          lda     tsstat,x   ready?          cmpa    #TRUN          bne     rsched2*          bsr     swtchu     switch users top page          rts     return** select next (runnable) task*gtsktb    pshs    d             current index          ldx     #tsktab       task table          ldb     tskindx          lda     #TSKSIZ          mul          leax    d,x           select task          puls    d,pcstptsk    pshs  a          lda   tskindx         step index          inca          cmpa  NUM_TSK          blo   01f             against max          clra01        sta   tskindx          puls  a,pc** Switch users*   X - Task entry for new task*swtchu    puls    y          get return address          stx     utask      set up new running task          lds     umark0,x   reset stack          jmp     0,y        return to caller          pag** makrdy** Make a task ready to run.  Enter with x* pointing to task table entry.  If new tasks* priority is higher than current, set the* 'chproc' flag so the system can change tasks.*makrdy    lda     #TRUN      set status          sta     tsstat,x          ldd     #0         clear events flag          std     tsevnt,x*makrd6    rts     return