NET       set     1          ttl     SWTPc      Intelligent I/O Processor          sttl    Hardware   Definitions          opt     exp          abs          pag          lib     environment.h          sttl    CPU        Vectors          pag          org     CPUtraps          fdb     rom_trap   Unused          fdb     rom_swi3   SWI3          fdb     rom_swi2   SWI2          fdb     rom_firq   FIRQ          fdb     IRQ_han    IRQ          fdb     rom_swi    SWI          fdb     rom_nmi  Background debug          fdb     rom_init   Reset*        info    UniFLEX Networking ROM        info    for CPU09GPP+09NET        info    At the start of ROM the locations for preset        info    the network setting are reserved        info    0000...0005  MAC ADDRESS        info    0006...0009  IP address        info    000A...000D  NETMASK        info    000E...0011  GATEWAY IP address        info    avoid any duplicate settings!          sttl    System     RESET Code          pag          org     ROMLOorg* start of ROM***************************************************************** contains the MAC ADDRESS to be used, make sure that is unique** contains the IP address for the interface** contains the NETMASK for the interface** contains the IP address of the GATEWAY***************************************************************** REPLACE the defaults with your specific values** this is for the local network device setup** mac address 6 bytes                            (Ex00...Ex05)*wzifma    fcb    $FF,$FF,$FF,$FF,$FF,$FF** Note! HERE  IP addresses are written COMMA SEPARATED!** IP addres for THIS interface (avoid duplicates!!!)wzifip    fcb    255,255,255,255                (Ex06...Ex09)* NETMASKwzifnm    fcb    255,255,255,255                (Ex0A...Ex0D)* GATEWAY IP addresswzifga    fcb    255,255,255,255                (Ex0E...E011)*****************************************************************************************************************************DBmsg00   fcc     $d,'NWP ROM :241217',0***************************************************************DBmsg01   fcc     $d,'System Initialization Complete',0DBmsg02   fcc     $d,'CPU RESET Complete',0CPU_down  fcc     $d,$d,'System CPU not functioning',0** share settings with kernel driver code*fio_fsz   equ     *        device fifo sizefio_dsz   equ     *+2      device RAM sizemax_trn   equ     *+4      max transactions          lib     ../include/nwp_ini.h** System RESET code*rom_init  lds     #ROMstack  initialize stack pointer          ldmd    320        jsr     stbinit    go initialize system memory30        lds     #tsktab     Task 0 Stack          leas    TSKSIZ,s          lbsr    fio_reset          jsr     skdvini    set the device itself          lbsr    timerin          pshs    x,y          ldy     #DBmsg00+1 skip initial EOL          ldx     #$03e0     top of FIFO02        lda     0,y+          beq     01f          sta     0,x+       copy ROM info          bra     02b01        puls    x,y** Initialization complete - Start executing commands*fio_start10        jmp     rsched          sttl    ROM        Interrupt Fielders          pagrom_nmi   bsr     rom_int          fcc     'NMI',0rom_firq  bsr     rom_int          fcc     'FIRQ',0rom_swi   bsr     rom_int          fcc     'SWI',0rom_swi2  bsr     rom_int          fcc     'SWI2',0rom_swi3  bsr     rom_int          fcc     'SWI3',0rom_trap  bsr     rom_int          fcc     'TRAP',0rom_int   ldx     #ROM_ERR          jsr     DB_pdata          puls    x          jsr     DB_pdatarom_bad   bra     **ROM_ERR   fcc     $d,'ROM Error: ',0*